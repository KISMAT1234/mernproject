{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\mern7am\\\\news\\\\src\\\\middleware\\\\RouteMiddleware.js\",\n  _s = $RefreshSig$();\nimport { Outlet } from \"react-router-dom\";\nimport React, { useEffect, useState } from \"react\";\nimport apiUrl from \"../config/apiUrl\";\nimport \"../css/style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RouteMiddleware() {\n  _s();\n  var _localStorage$getItem;\n  let token = (_localStorage$getItem = localStorage.getItem(\"token\")) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : \"\";\n  const [isLogin, setIsLogin] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    apiUrl.get(\"/login/tokenmatch\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      if (response.data.success) {\n        setIsLogin(true);\n        setLoading(false);\n      } else {\n        setIsLogin(false);\n        setLoading(false);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12 text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this);\n  } else {\n    if (isLogin) {\n      return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this);\n    } else {\n      window.location.href = \"/\";\n    }\n  }\n}\n_s(RouteMiddleware, \"mpYxm+tLii985e92atcyz//bCxU=\");\n_c = RouteMiddleware;\nexport default RouteMiddleware;\nvar _c;\n$RefreshReg$(_c, \"RouteMiddleware\");","map":{"version":3,"names":["Outlet","React","useEffect","useState","apiUrl","jsxDEV","_jsxDEV","RouteMiddleware","_s","_localStorage$getItem","token","localStorage","getItem","isLogin","setIsLogin","loading","setLoading","get","headers","Authorization","then","response","data","success","catch","err","console","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","window","location","href","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Desktop/mern7am/news/src/middleware/RouteMiddleware.js"],"sourcesContent":["import {Outlet} from \"react-router-dom\";\r\nimport React,{useEffect,useState} from \"react\";\r\nimport apiUrl from \"../config/apiUrl\";\r\nimport \"../css/style.css\";\r\n\r\nfunction RouteMiddleware(){\r\n    let token=localStorage.getItem(\"token\") ?? \"\";\r\n    const [isLogin,setIsLogin]=useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n\r\n    useEffect(()=>{\r\n        apiUrl.get(\"/login/tokenmatch\",{\r\n            headers:{\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        }).then((response)=>{\r\n            if(response.data.success){\r\n                setIsLogin(true);\r\n                setLoading(false);\r\n            }else{\r\n                setIsLogin(false);\r\n                setLoading(false);\r\n            }\r\n        }).catch((err)=>{\r\n            console.log(err);\r\n        \r\n        })\r\n        \r\n    },[]);\r\n\r\n    if(loading){\r\n        return(\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-12 text-center\">\r\n                        <h1>Loading...</h1>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }else{\r\n        if(isLogin){\r\n            return(\r\n                <Outlet/>\r\n            );\r\n        }else{\r\n            window.location.href=\"/\";\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default RouteMiddleware;"],"mappings":";;AAAA,SAAQA,MAAM,QAAO,kBAAkB;AACvC,OAAOC,KAAK,IAAEC,SAAS,EAACC,QAAQ,QAAO,OAAO;AAC9C,OAAOC,MAAM,MAAM,kBAAkB;AACrC,OAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,SAASC,eAAeA,CAAA,EAAE;EAAAC,EAAA;EAAA,IAAAC,qBAAA;EACtB,IAAIC,KAAK,IAAAD,qBAAA,GAACE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,cAAAH,qBAAA,cAAAA,qBAAA,GAAI,EAAE;EAC7C,MAAM,CAACI,OAAO,EAACC,UAAU,CAAC,GAACX,QAAQ,CAAC,KAAK,CAAC;EAC1C,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAG5CD,SAAS,CAAC,MAAI;IACVE,MAAM,CAACa,GAAG,CAAC,mBAAmB,EAAC;MAC3BC,OAAO,EAAC;QACJC,aAAa,EAAG,UAAST,KAAM;MACnC;IACJ,CAAC,CAAC,CAACU,IAAI,CAAEC,QAAQ,IAAG;MAChB,IAAGA,QAAQ,CAACC,IAAI,CAACC,OAAO,EAAC;QACrBT,UAAU,CAAC,IAAI,CAAC;QAChBE,UAAU,CAAC,KAAK,CAAC;MACrB,CAAC,MAAI;QACDF,UAAU,CAAC,KAAK,CAAC;QACjBE,UAAU,CAAC,KAAK,CAAC;MACrB;IACJ,CAAC,CAAC,CAACQ,KAAK,CAAEC,GAAG,IAAG;MACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAEpB,CAAC,CAAC;EAEN,CAAC,EAAC,EAAE,CAAC;EAEL,IAAGV,OAAO,EAAC;IACP,oBACIT,OAAA;MAAKsB,SAAS,EAAC,WAAW;MAAAC,QAAA,eACtBvB,OAAA;QAAKsB,SAAS,EAAC,KAAK;QAAAC,QAAA,eAChBvB,OAAA;UAAKsB,SAAS,EAAC,uBAAuB;UAAAC,QAAA,eAClCvB,OAAA;YAAAuB,QAAA,EAAI;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAEd,CAAC,MAAI;IACD,IAAGpB,OAAO,EAAC;MACP,oBACIP,OAAA,CAACN,MAAM;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAEjB,CAAC,MAAI;MACDC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAC,GAAG;IAC5B;EACJ;AAGJ;AAAC5B,EAAA,CA/CQD,eAAe;AAAA8B,EAAA,GAAf9B,eAAe;AAiDxB,eAAeA,eAAe;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}